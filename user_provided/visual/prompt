Read the whole file. thnk hard. accuracy is more important than speed.
Use comments to explain the code.
print statement to the terminal while code is running to update status.

Refer to this to make sure the pages renders locally and on GitHub pages:
Display all plots, tables, and download buttons locally and on GitHub Pages.
Include the download button above the table for each dataset.
Use GitHub Pages–friendly relative paths (js/filename.js relative to index.html) that work regardless of repo name.
Ensure case-sensitive folder and file names are handled correctly.
Wrap plotting and table code so it runs after the JS data file is fully loaded (DOMContentLoaded or equivalent).
Assign unique variable names for each dataset to prevent overwriting.
Keep all previous functionality:
CSV parsing with utf-8 + errors='ignore'
Ignore NAN and negative numbers
Compute statistics and durations
Plot temperature (left y-axis), humidity (right y-axis)
Shade heater-on periods, show target temperature line
Pagination for tables (max 10 entries)
Generate index.html in ../../docs and JS files in ../../docs/js as before.

Please update my build_website.py so that the HTML and JS it generates will work
correctly on GitHub Pages. Make sure:
All paths to JS files are GitHub Pages–friendly (relative to the index.html file)
and work regardless of the repo name.
Folder and file names are handled in a case-sensitive way.
All generated JS data files are referenced properly in index.html so the plots and tables load.
The script still generates all interactive plots, tables, download buttons,
and statistics as before.

Write python code to build a website.
put all the code in a function called "build_website"
I want the function to execute automatically when the Python file is run."

in the header of the python file, put the date the file was created as a comment

Look in this directory. "../../results/heater"
each filename is saved with a timestamp - year month day hour minute
For each file found, create a .js file in "../../docs/js" with the same filename

When reading CSV files, assume the files may contain non-UTF-8 characters like degree symbols. Open them in Python with encoding='utf-8' and errors='ignore' to avoid decode errors.
Write Python code that reads CSV files which may contain symbols like °C or other non-ASCII characters. Handle them gracefully by using UTF-8 encoding with error handling, and ignore invalid characters.

in each folder create a const variable with a unique name
set that variable equal to json that contains the contents of the file of the same name

this is the strcuture of the data inside the .csv in the "../../results/heater" folder

An example of the file contents are:

TimeElapsed,Humidity,Temperature,Target,Heater
00:00:00,NAN,NAN,NAN,NAN
00:00:10,5.0,47.2,50.0,ON
00:00:20,NAN,NAN,NAN,NAN
00:00:30,5.0,47.2,50.0,ON
00:00:40,4.9,-45.0,50.0,ON
00:00:50,5.0,47.2,50.0,ON
00:01:00,5.1,47.2,50.0,ON
00:01:10,5.1,47.2,50.0,ON
00:01:20,4.8,47.2,50.0,ON
00:01:30,4.6,47.2,50.0,ON

Ignore the NAN. disreguard negative numbers. just do not include.
The Humidity, Temperature, Target are all numbers, convert those columns to numbers for analysis.

TimeElapsed is the timestamp. hours : minutes : seconds
convert to minutes and use as a number to create a scatter plot with the temperature and humidity.
Add a background shade for when the heater is on or off.
Add a horizontal line to show the taerget temperature

plot temperature against the left y axis and humidity against the right y axis.
add light red background to show when the heater was on
add a horizontal line - dashed black to show the target temperature

label the axes with units, for example x-axis "Time lapsed (minutes)", y-axis left "Temperature (degC)", y-axis right "Humidity (%)"
when labeling the data sets, drop the filename specifics and just include "Temperature" or "Humditiy" as label name

For each plot, add an interactive table to display the data below each plot. Use https://tabulator.info/ to build the plot.
Pagenate the table to max of 10 entries with pagination to keep the table short and the page readable
For the minutes column, display with two decimal places, not more.

Add a button to "download csv" to download the data in the plot as a csv.
Place the button just above the table.
Give each dataset a unique name so all buttons can displayed with their plots on the webpage.
Put the timestamp in the filename.

Add a background shade for when the heater is on or off.
Add a horizontal line to show the taerget temperature

Use Javascript Plotly
https://plotly.com/javascript/
to create plot (specifically a scatter plot) of the time vs temperature for each .csv saved in
plots can be downloaded with plotly built-ins, give the downloaded filename from plotly the same name as the source file

Refer to the variable for the data

In the header of the .js file, include the date and clear direction of what to copy paste where in the index file, located in the "docs" direction, the folder above the one containing the js for the code to run properly


also create an index.html with the title "MycoReator" in "../../docs"

Objective subheading with text for in 1-3 sentences
Include a link to the github repo https://github.com/jesnyder/mycoReactor

Capabilities subheading - 3-4 sentences on what this can do

Tasks subheading with text and a list of tasks with software of hardware or tool with details (including links to parts or libraries if found)
Include a wiring diagram

Results subheading with each .csv visualized.
Assign unique variable names so plots, tables, data, and downloadable elements can all be displayed.


List in reverse chronological order the

title of the section, which is the filename converted to a readable date.
For example 202602111405 filename becomes Feb 11, 2026 14:05

Check if there are notes on this dataset.
Look in "../../user_provided/experiment_notes"
see if there is a ".txt" file with the same filename as the dataset
If found, read in the text. Check for grammatical or spelling errors.
Then place as text in this section.
Look for hyperlinks in the text and then convert to a hyperlink inline to open in a new tab when clicked.

When calculating the statistics for the next part, treat the temperatures and humidity read in from the dataset as numbers, not strings
Ignore any "NAN" or negative numbers for analysis of minimum, maximum, average, or range.
Present the numbers with two places after the decimal point.

List the
Duration: calculate the duration in minutes
Duration, Heater ON: calculate the total length of time the heater was on in minutes
Duration, Heater OFF: calculate the total length of time the heater was off in minutes

Temperature, Maximum: calculate number in minutes excluding negative numbers or NAN
Temperature, Minimum: calculate number excluding negative numbers or NAN from retrieved data for this file
Temperature, Average: calculate number excluding negative numbers or NAN from retrieved data for this file
Temperature, Range: calculate number excluding negative numbers or NAN from retrieved data for this file

Humidity, Maximum: calculate number in minutes excluding negative numbers or NAN
Humidity, Minimum: calculate number excluding negative numbers or NAN from retrieved data for this file
Humidity, Average: calculate number excluding negative numbers or NAN from retrieved data for this file
Humidity, Range: calculate number excluding negative numbers or NAN from retrieved data for this file



Then display the plot / download button / table for each of the source files

List the figures produced for each .csv file found in the folder in reverse chronological order.
Place the plot, then the button to download the csv and then the table.

Then repeat for the next dataset.


This is the background for the index file text. Include specifics, including wiring and how to identify the pins on the IRL44N

/*
Date: 2026-02-11
Objective: Control a heating pad using SHT30 temperature sensor.
The Arduino reads temperature and humidity, controls the heater via MOSFET, and prints system status.
The target heater temperature is adjustable via Serial commands (e.g., "H 50" sets target to 50°C).

Hardware Setup:

1. SHT30 Sensor (I2C)
   - Red    -> 5V
   - Black  -> GND
   - Yellow -> SCL (Mega pin 21)
   - White  -> SDA (Mega pin 20)

2. Heating Pad via MOSFET (IRL44N)
   - Gate   -> Arduino pin 9
   - Drain  -> Heating pad negative (-)
   - Source -> GND
   - Heating pad positive (+) -> 12V DC adapter positive
   - 1N4007 diode across heating pad: Cathode (silver band) to +12V, Anode to - (drain side)
     Purpose: protects MOSFET from back EMF.

3. Power Supply
   - Alito AC/DC Adapter ALT-1201: 12V DC, 1A for heating pad
   - Arduino powered via USB or separate 5V supply

Libraries:
   - Wire.h (I2C communication)
   - Adafruit_SHT31.h (SHT30 sensor)

*/

#include <Wire.h>
#include "Adafruit_SHT31.h"

Adafruit_SHT31 sht31 = Adafruit_SHT31();

const int heaterPin = 9;        // Arduino pin connected to MOSFET gate
float targetTemp = 50.0;        // Default target temperature (°C)

unsigned long startMillis;       // Track elapsed time

void setup() {
  Serial.begin(9600);
  pinMode(heaterPin, OUTPUT);
  digitalWrite(heaterPin, LOW); // Heater off initially

  if (!sht31.begin(0x44)) {
    Serial.println("SHT30 sensor not found!");
  }

  startMillis = millis(); // Start time counter
}

void loop() {
  // --- Handle Serial input for adjusting target temperature ---
  if (Serial.available()) {
    String cmd = Serial.readStringUntil('\n');
    cmd.trim(); // Remove whitespace
    if (cmd.startsWith("H")) {
      float val = cmd.substring(1).toFloat();
      if (val > 0 && val < 100) {
        targetTemp = val;
      }
    }
  }

  // --- Read SHT30 sensor ---
  float temperature = sht31.readTemperature(); // °C
  float humidity = sht31.readHumidity();       // %

  bool heaterOn = false;

  if (!isnan(temperature)) {
    // --- Heater control logic ---
    if (temperature < targetTemp) {
      digitalWrite(heaterPin, HIGH);
      heaterOn = true;
    } else {
      digitalWrite(heaterPin, LOW);
      heaterOn = false;
    }
  }

  // --- Compute elapsed time ---
  unsigned long elapsed = (millis() - startMillis) / 1000;
  unsigned int hours = elapsed / 3600;
  unsigned int minutes = (elapsed % 3600) / 60;
  unsigned int seconds = elapsed % 60;

  // --- Print system status on one line ---
  Serial.print(hours); Serial.print(":");
  if (minutes < 10) Serial.print("0");
  Serial.print(minutes); Serial.print(":");
  if (seconds < 10) Serial.print("0");
  Serial.print(seconds); Serial.print(" | ");

  Serial.print("Humidity: ");
  Serial.print(isnan(humidity) ? -1 : humidity, 1);
  Serial.print("% | Temp: ");
  Serial.print(isnan(temperature) ? -1 : temperature, 1);
  Serial.print("°C | Target: ");
  Serial.print(targetTemp, 1);
  Serial.print("°C | Heater: ");
  Serial.println(heaterOn ? "ON" : "OFF");

  delay(1000); // 1-second loop for readability
}


"""
Date: 2026-02-11
Objective: Log Arduino heater system status to a file every 10 seconds.
Major Tasks:
1. Open serial connection to Arduino
2. Create a timestamped CSV log file in '../../results/heater'
3. Read system status line from Arduino
4. Parse time elapsed, humidity, temperature, target heater temperature, heater on/off
5. Append parsed data to log file every 10 seconds
6. Print same information to console on one line
"""

import serial
import time
import os
from datetime import datetime

# ==== CONFIG ====
COM_PORT = 'COM5'        # Set your Arduino COM port
BAUD_RATE = 9600
LOG_INTERVAL = 10        # seconds between log entries
LOG_FOLDER = "../../results/heater"

# ==== CREATE LOG FOLDER ====
if not os.path.exists(LOG_FOLDER):
    os.makedirs(LOG_FOLDER)

# Timestamped CSV filename: YYYYMMDDHHMM.csv
log_filename = os.path.join(LOG_FOLDER, f"{datetime.now().strftime('%Y%m%d%H%M')}.csv")

# ==== OPEN SERIAL PORT ====
try:
    ser = serial.Serial(COM_PORT, BAUD_RATE, timeout=2)
    time.sleep(2)  # allow Arduino to reset
except serial.SerialException as e:
    print(f"Error opening serial port {COM_PORT}: {e}")
    exit()

print(f"Logging started. Data will append to {log_filename}")

# Write CSV header
with open(log_filename, 'a') as f:
    f.write("TimeElapsed,Humidity,Temperature,Target,Heater\n")

start_time = time.time()

try:
    while True:
        # --- Time elapsed ---
        elapsed = int(time.time() - start_time)
        hours = elapsed // 3600
        minutes = (elapsed % 3600) // 60
        seconds = elapsed % 60
        time_str = f"{hours:02}:{minutes:02}:{seconds:02}"

        # --- Read line from Arduino ---
        line = ser.readline().decode('utf-8', errors='ignore').strip()

        # Expected Arduino output format:
        # 00:00:05 | Humidity: 45.2% | Temp: 38.6°C | Target: 40.0°C | Heater: ON
        if line:
            try:
                parts = [p.strip() for p in line.split('|')]
                humidity = parts[1].split()[1].replace('%','')
                temp = parts[2].split()[1].replace('°C','')
                target = parts[3].split()[1].replace('°C','')
                heater = parts[4].split()[1]
            except (IndexError, ValueError):
                humidity = temp = target = heater = 'NAN'
        else:
            humidity = temp = target = heater = 'NAN'

        # --- Build CSV line ---
        log_line = f"{time_str},{humidity},{temp},{target},{heater}\n"

        # --- Append to file ---
        with open(log_filename, 'a') as f:
            f.write(log_line)

        # --- Print to console ---
        print(f"{time_str} | Humidity: {humidity}% | Temp: {temp}°C | Target: {target}°C | Heater: {heater}")

        # --- Wait before next log ---
        time.sleep(LOG_INTERVAL)

except KeyboardInterrupt:
    print("\nLogging stopped by user.")

finally:
    ser.close()


Objective

Control and monitor a heating pad system for precise temperature regulation using an Arduino, SHT30 temperature/humidity sensor, and MOSFET. Data is logged and visualized to optimize heater performance.
Major Tasks

    Read temperature and humidity from the SHT30 sensor.
    Control a heating pad via IRL44N MOSFET based on target temperature.
    Log system status to timestamped CSV files every 10 seconds.
    Generate interactive web-based plots of temperature and humidity over time.

Tools Used

    Arduino (Mega/Uno)
    SHT30 I2C temperature & humidity sensor
    IRL44N N-channel MOSFET
    Python (logging and website generation)
    Plotly.js for interactive plotting
    HTML/CSS/JavaScript for the dashboard

More Information

For detailed instructions, plots, and additional documentation, visit the project website:
https://jesnyder.github.io/mycoReactor/
Lessons Learned from the MycoReactor Heater Project

    Double-check pin assignments on the Arduino
        Always confirm which Arduino pin is connected to the MOSFET gate.
        Using the wrong pin can prevent control signals from reaching the MOSFET or, worse, fry components.

    Understand the MOSFET pinout
        The IRL44N (and similar MOSFETs) has Gate (G), Drain (D), Source (S).
        On most IRL44N packages (TO-220 or similar), looking at the front (text side), left to right is Gate → Drain → Source.
        Misidentifying pins can make the heater permanently on or prevent it from turning on.

    The IRL44N (Allecin) diagram: https://www.icdrex.com/introducing-the-irlz44n-complete-guide-features-and-applications/

    Always connect a common ground
        The Arduino ground and the heater/MOSFET ground must be connected.
        Without a shared reference, the MOSFET cannot properly switch, leading to erratic behavior.

    Diode placement matters
        A flyback diode (e.g., 1N4007) is needed across the load, not the MOSFET.
        The cathode (silver band) goes to the positive voltage, and the anode goes to the MOSFET drain/negative side of the heating pad.
        This protects the MOSFET from voltage spikes caused by inductive loads or sudden heater disconnection.

    Check voltage ratings of components
        Make sure the MOSFET and diode are rated for the heater voltage and current.
        Using components rated too low can cause permanent damage.

    Test with low power first
        Before applying full 12V, test control logic with small loads or an LED.
        This prevents frying MOSFETs or other components if wiring is incorrect.

    Thermal lag is normal
        The temperature sensor reacts to the environment, not instantly to heater changes.
        Expect some overshoot and lag — it’s normal for bang-bang controllers.

    Serial commands are useful for dynamic adjustment
        Being able to set target temperature via the Serial Monitor allows safe testing without reprogramming.
        Example: "H 50" sets the target to 50°C.

    Document wiring clearly
        Diagrams and text notes prevent mistakes.
        Label wires: SHT30 (VCC, GND, SCL, SDA), MOSFET (G, D, S), heater (+, -), diode.

    Keep spares of sensitive components
        MOSFETs and diodes can fry if wired incorrectly.
        Having replacements prevents long downtime.
